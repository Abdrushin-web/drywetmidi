# Performance

Methods to get, process and remove timed events and notes now work faster and consume less memory. Full tables with benchmarks results can be found here:
* [synthetic benchmarks](https://gist.github.com/melanchall/d5dd6ee785a94c9df0443fd7616d9c8b);
* [benchmarks on real files](https://gist.github.com/melanchall/1b134282e2bc3dba47b5790300fcc51c).

# New features and improvements

* Added [GetObjectsUtilities](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.GetObjectsUtilities.html) class containing methods that allow get objects of different types from the input ones (or MIDI file, for example).
* [ProcessTimedEvents](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.TimedEventsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_TimedEventsManagingUtilities_ProcessTimedEvents_) and [RemoveTimedEvents](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.TimedEventsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_TimedEventsManagingUtilities_RemoveTimedEvents_) methods return now count of processed/removed timed events.
* [ProcessNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html#Melanchall_DryWetMidi_Interaction_NotesManagingUtilities_ProcessNotes_) and [RemoveNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html#Melanchall_DryWetMidi_Interaction_NotesManagingUtilities_RemoveNotes_) methods return now count of processed/removed notes.
* [ProcessChords](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_ChordsManagingUtilities_ProcessChords_) and [RemoveChords](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_ChordsManagingUtilities_RemoveChords_) methods return now count of processed/removed chords.
* Added [IsEnabled](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.MidiDevice.html#Melanchall_DryWetMidi_Devices_MidiDevice_IsEnabled) property to [MidiDevice](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.MidiDevice.html).
* Added methods to [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) to move to snap points by data.
* All move-to-by-snap-points methods of [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) return `bool` now to indicate whether time changed or not.
* Added [PlaybackStart](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_PlaybackStart) and [PlaybackEnd](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_PlaybackEnd) properties to [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html).
* Added [IsEnabled](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackSnapping.html#Melanchall_DryWetMidi_Devices_PlaybackSnapping_IsEnabled) to [PlaybackSnapping](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackSnapping.html).
* Added [PlaybackSnapping.Clear](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackSnapping.html#Melanchall_DryWetMidi_Devices_PlaybackSnapping_Clear) method.
* Added [TrackProgram](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TrackProgram), [TrackPitchValue](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TrackPitchValue) and [TrackControlValue](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TrackControlValue) to [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html).
* Removed reading handlers API.
* Added `<`, `>`, `<=`, `>=` operators for [Tempo](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.Tempo.html) and [TimeSignature](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.TimeSignature.html).
* [BeatsPerMinute](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.Tempo.html#Melanchall_DryWetMidi_Interaction_Tempo_BeatsPerMinute) property of [Tempo](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.Tempo.html) is now of `double` type.
* Added `settings` parameter to [SplitByChannel](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.MidiFileSplitter.html#Melanchall_DryWetMidi_Tools_MidiFileSplitter_SplitByChannel_Melanchall_DryWetMidi_Core_MidiFile_Melanchall_DryWetMidi_Tools_SplitFileByChannelSettings_) method.
* Added `settings` parameter to [SplitByNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.MidiFileSplitter.html#Melanchall_DryWetMidi_Tools_MidiFileSplitter_SplitByNotes_Melanchall_DryWetMidi_Core_MidiFile_Melanchall_DryWetMidi_Tools_SplitFileByNotesSettings_) method.
* Return type of [GetTimedEvents](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.TimedEventsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_TimedEventsManagingUtilities_GetTimedEvents_), [GetNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html#Melanchall_DryWetMidi_Interaction_NotesManagingUtilities_GetNotes_) and [GetChords](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_ChordsManagingUtilities_GetChords_) changed from `IEnumerable<T>` to `ICollection<T>`.
* Added [NoteDetectionSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NoteDetectionSettings.html) to [GetNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html#Melanchall_DryWetMidi_Interaction_NotesManagingUtilities_GetNotes_), [ProcessNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html#Melanchall_DryWetMidi_Interaction_NotesManagingUtilities_ProcessNotes_) and [RemoveNotes](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html#Melanchall_DryWetMidi_Interaction_NotesManagingUtilities_RemoveNotes_).
* Added [ChordDetectionSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordDetectionSettings.html) to [GetChords](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_ChordsManagingUtilities_GetChords_), [ProcessChords](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_ChordsManagingUtilities_ProcessChords_) and [RemoveChords](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html#Melanchall_DryWetMidi_Interaction_ChordsManagingUtilities_RemoveChords_).
* Added [ChordDetectionSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordDetectionSettings.html) to [ChordsQuantizingSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.ChordsQuantizingSettings.html) and [ChordsRandomizingSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.ChordsRandomizingSettings.html).
* Added [NoteDetectionSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NoteDetectionSettings.html) to [NotesQuantizingSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.NotesQuantizingSettings.html) and [NotesRandomizingSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.NotesRandomizingSettings.html).
* Added [SilentNoteOnPolicy](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.InputDevice.html#Melanchall_DryWetMidi_Devices_InputDevice_SilentNoteOnPolicy) property to [InputDevice](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.InputDevice.html).
* Added [SplitByChunks](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.MidiFileSplitter.html#Melanchall_DryWetMidi_Tools_MidiFileSplitter_SplitByChunks_Melanchall_DryWetMidi_Core_MidiFile_Melanchall_DryWetMidi_Tools_SplitFileByChunksSettings_) method to [MidiFileSplitter](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.MidiFileSplitter.html).

# Small changes and bug fixes

* Some methods are now obsolete:
  * `GetTimedEventsAndNotesUtilities` (OBS5);
  * `GetNotesAndRestsUtilities` (OBS6);
  * `TimedEventsManagingUtilities.ToTrackChunk`, `NotesManagingUtilities.ToTrackChunk`, `ChordsManagingUtilities.ToTrackChunk` (OBS7);
  * `TimedEventsManagingUtilities.ToFile`, `NotesManagingUtilities.ToFile`, `ChordsManagingUtilities.ToFile` (OBS8);
  * `TimedEventsManagingUtilities.AddTimedEvents`, `NotesManagingUtilities.AddNotes`, `ChordsManagingUtilities.AddChords` (OBS9).
* Discard high resolution timer request on playback stop (#106).
* Implemented `ICollection<MidiEvent>` on [EventsCollection](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.EventsCollection.html).
* Implemented `ICollection<MidiChunk>` on [ChunksCollection](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.ChunksCollection.html).
* **Fixed:** [PatternUtilities.CombineInParallel](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Composing.PatternUtilities.html#Melanchall_DryWetMidi_Composing_PatternUtilities_CombineInParallel_System_Collections_Generic_IEnumerable_Melanchall_DryWetMidi_Composing_Pattern__) last action moves back to previous time (#112).
* **Fixed:** [Playback.MoveToNextSnapPoint](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_MoveToNextSnapPoint) works incorrectly for snap point at zero.
* **Fixed:** [MetricTimeSpan.Clone](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.MetricTimeSpan.html#Melanchall_DryWetMidi_Interaction_MetricTimeSpan_Clone) works incorrectly.
* **Fixed:** Wrong order of actual and expected counts arguments on passing to [UnexpectedTrackChunksCountException](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.UnexpectedTrackChunksCountException.html) constructor.